import{defineDisplay as e}from"@directus/extensions-sdk";import{unref as n,watch as t,isRef as r,shallowRef as o,ref as u,defineComponent as i,resolveComponent as s,openBlock as c,createElementBlock as l,createBlock as a,withCtx as f,createElementVNode as d}from"vue";function m(e){return"function"==typeof e?e():n(e)}"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const h=()=>{};function p(e,n=!1,t="Timeout"){return new Promise(((r,o)=>{n?setTimeout((()=>o(t)),e):setTimeout(r,e)}))}function y(e,n=!1){function o(r,{flush:o="sync",deep:u=!1,timeout:i,throwOnTimeout:s}={}){let c=null;const l=[new Promise((i=>{c=t(e,(e=>{r(e)!==n&&(null==c||c(),i(e))}),{flush:o,deep:u,immediate:!0})}))];return null!=i&&l.push(p(i,s).then((()=>m(e))).finally((()=>null==c?void 0:c()))),Promise.race(l)}function u(u,i){if(!r(u))return o((e=>e===u),i);const{flush:s="sync",deep:c=!1,timeout:l,throwOnTimeout:a}=null!=i?i:{};let f=null;const d=[new Promise((r=>{f=t([e,u],(([e,t])=>{n!==(e===t)&&(null==f||f(),r(e))}),{flush:s,deep:c,immediate:!0})}))];return null!=l&&d.push(p(l,a).then((()=>m(e))).finally((()=>(null==f||f(),m(e))))),Promise.race(d)}function i(e){return s(1,e)}function s(e=1,n){let t=-1;return o((()=>(t+=1,t>=e)),n)}if(Array.isArray(m(e))){return{toMatch:o,toContains:function(e,n){return o((n=>{const t=Array.from(n);return t.includes(e)||t.includes(m(e))}),n)},changed:i,changedTimes:s,get not(){return y(e,!n)}}}return{toMatch:o,toBe:u,toBeTruthy:function(e){return o((e=>Boolean(e)),e)},toBeNull:function(e){return u(null,e)},toBeNaN:function(e){return o(Number.isNaN,e)},toBeUndefined:function(e){return u(void 0,e)},changed:i,changedTimes:s,get not(){return y(e,!n)}}}function v(e){return y(e)}function g(e,n,t){const{immediate:r=!0,delay:i=0,onError:s=h,onSuccess:c=h,resetOnExecute:l=!0,shallow:a=!0,throwError:f}=null!=t?t:{},d=a?o(n):u(n),m=u(!1),y=u(!1),g=o(void 0);async function w(t=0,...r){l&&(d.value=n),g.value=void 0,m.value=!1,y.value=!0,t>0&&await p(t);const o="function"==typeof e?e(...r):e;try{const e=await o;d.value=e,m.value=!0,c(e)}catch(e){if(g.value=e,s(e),f)throw e}finally{y.value=!1}return d.value}r&&w(i);const P={state:d,isReady:m,isLoading:y,error:g,execute:w};return{...P,then:(e,n)=>new Promise(((e,n)=>{v(y).toBe(!1).then((()=>e(P))).catch(n)})).then(e,n)}}function w(e,n={}){const r=g((()=>async function(e){return new Promise(((n,t)=>{const r=new Image,{src:o,srcset:u,sizes:i,class:s,loading:c,crossorigin:l,referrerPolicy:a}=e;r.src=o,u&&(r.srcset=u),i&&(r.sizes=i),s&&(r.className=s),c&&(r.loading=c),l&&(r.crossOrigin=l),a&&(r.referrerPolicy=a),r.onload=()=>n(r),r.onerror=t}))}(m(e))),void 0,{resetOnExecute:!0,...n});return t((()=>m(e)),(()=>r.execute(n.delay)),{deep:!0}),r}var P=i({setup(e){const{isLoading:n}=w({src:e.value});return{isLoading:n,src:e.value}},props:{value:{type:String,default:null}}});const T={key:0},x=["src"];var B=e({id:"photo-url",name:"Photo URL",icon:"image",description:"Displays an external image by URL",component:((e,n)=>{const t=e.__vccOpts||e;for(const[e,r]of n)t[e]=r;return t})(P,[["render",function(e,n,t,r,o,u){const i=s("v-avatar");return e.isLoading?(c(),l("span",T,"Loading")):(c(),a(i,{key:1},{default:f((()=>[d("img",{src:e.src},null,8,x)])),_:1}))}],["__file","display.vue"]]),options:null,types:["string"]});export{B as default};
